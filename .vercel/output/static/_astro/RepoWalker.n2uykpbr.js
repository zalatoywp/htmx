import{r as d}from"./index.LFf77hJu.js";var y={exports:{}},g={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D=d,R=Symbol.for("react.element"),E=Symbol.for("react.fragment"),L=Object.prototype.hasOwnProperty,C=D.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$={key:!0,ref:!0,__self:!0,__source:!0};function N(m,n,l){var x,f={},h=null,p=null;l!==void 0&&(h=""+l),n.key!==void 0&&(h=""+n.key),n.ref!==void 0&&(p=n.ref);for(x in n)L.call(n,x)&&!$.hasOwnProperty(x)&&(f[x]=n[x]);if(m&&m.defaultProps)for(x in n=m.defaultProps,n)f[x]===void 0&&(f[x]=n[x]);return{$$typeof:R,type:m,key:h,ref:p,props:f,_owner:C.current}}g.Fragment=E;g.jsx=N;g.jsxs=N;y.exports=g;var e=y.exports;function B({title:m,titleId:n,...l},x){return d.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:x,"aria-labelledby":n},l),m?d.createElement("title",{id:n},m):null,d.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z",clipRule:"evenodd"}))}const P=d.forwardRef(B),A=P,F=({error:m})=>e.jsx("div",{className:"rounded-md bg-red-50 p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(A,{className:"h-5 w-5 text-red-400","aria-hidden":"true"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),e.jsx("div",{className:"mt-2 text-sm text-red-700",children:m})]})]})}),U=()=>{const[m,n]=d.useState(""),[l,x]=d.useState(null),[f,h]=d.useState(!1);d.useState(!1);const[p,j]=d.useState(""),[u,b]=d.useState(""),[c,w]=d.useState(new Map);d.useEffect(()=>{document.title="Bluesky Repo Walker"},[]),d.useEffect(()=>{const t=new URLSearchParams(window.location.search).get("");t!==null&&u===""&&l===null&&(j(t),k(t).then(r=>{b(r),v(r)}))},[]);const v=async s=>{h(!0),n("");try{const t=await fetch(`https://bsky-search.jazco.io/repo/${s}`);if(!t.ok){let a="An error occurred while fetching the repository.";try{const o=await t.json();"error"in o&&(a=o.error)}catch{}throw new Error(a)}const r=await t.json();if("error"in r)throw new Error(r.error);const i=new Set;if(r.likes&&r.likes.length>0)for(let a=0;a<r.likes.length;a++){const o=r.likes[a];i.add(o.content.subject.uri.split("/")[2])}if(r.follows&&r.follows.length>0)for(let a=0;a<r.follows.length;a++){const o=r.follows[a];i.add(o.content.subject)}if(r.blocks&&r.blocks.length>0)for(let a=0;a<r.blocks.length;a++){const o=r.blocks[a];i.add(o.content.subject)}if(r.reposts&&r.reposts.length>0)for(let a=0;a<r.reposts.length;a++){const o=r.reposts[a];i.add(o.content.subject.uri.split("/")[2])}await S(Array.from(i)),x(r)}catch(t){n(t.message)}finally{h(!1)}},k=async s=>{n("");let t="";if(s.startsWith("did:"))t=s;else try{const r=await fetch(`https://bsky.social/xrpc/com.atproto.repo.describeRepo?repo=${s.toLowerCase()}`);if(!r.ok){let a="An error occurred while resolving the handle.";try{const o=await r.json();"error"in o&&(a=o.error,a==="redis: nil"&&(a="Handle not found."))}catch{}throw new Error(a)}t=(await r.json()).did}catch(r){return n(r.message),h(!1),""}return t},S=async s=>{s=s.map(t=>t.toLowerCase());try{const t=await fetch("https://plc.jazco.io/batch/by_did",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!t.ok){let i="An error occurred while resolving the handle.";try{const a=await t.json();"error"in a&&(i=a.error,i==="redis: nil"&&(i="Handle not found."))}catch{}throw new Error(i)}(await t.json())?.forEach(i=>{c.set(i.did,i.handle)}),w(c)}catch(t){throw new Error(t.message)}},_=async s=>{s.preventDefault(),n("");let t="";if(p.startsWith("did:"))t=p;else try{const r=await fetch(`https://bsky.social/xrpc/com.atproto.repo.describeRepo?repo=${p.toLowerCase()}`);if(!r.ok){let a="An error occurred while resolving the handle.";try{const o=await r.json();"error"in o&&(a=o.error,a==="redis: nil"&&(a="Handle not found."))}catch{}throw new Error(a)}t=(await r.json()).did}catch(r){return n(r.message),h(!1),""}return t};return e.jsxs("div",{children:[e.jsx("div",{className:"mx-auto max-w-7xl py-4 sm:py-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"border-2 border-gray-500 shadow-md   shadow-cyan-500/50 rounded-2xl text-white lg:px-0 relative isolate overflow-hidden bg-gray-950 px-3 sm:px-6 py-8 sm:pb-24 sm:rounded-3xl",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[m&&e.jsx("div",{className:"text-left mb-2",children:e.jsx(F,{error:m})}),e.jsxs("div",{children:[e.jsx("div",{className:"pb-0 pt-0 text-right pr-5",children:e.jsxs("span",{className:"relative inline-block overflow-hidden rounded-full p-[1px]",children:[e.jsx("span",{className:"absolute inset-[-1000%] animate-[spin_2s_linear_infinite] bg-[conic-gradient(from_90deg_at_50%_50%,#E2CBFF_0%,#393BB2_50%,#E2CBFF_100%)]"}),e.jsx("div",{className:" inline-flex h-full w-full cursor-pointer items-center justify-center rounded-full bg-slate-950/90 px-3 py-1 text-sm font-medium text-white backdrop-blur-3xl",onClick:()=>alert("Su IP no está autorizada para acceder a esta sección"),children:"Acceso Usuarios"})]})}),e.jsx("h1",{className:"text-3xl font-bold text-orange-800 sm:text-6xl text-center",children:"Zalabsky Dev Tools"}),e.jsx("p",{className:"mt-4 pb-6 text-lg leading-6 text-gray-200 text-center",children:"Una herramienta para explorar los contenidos públicos de Bluesky"}),e.jsxs("form",{className:"mt-6 sm:flex sm:items-center max-w-lg mx-auto",action:"#",children:[e.jsx("label",{htmlFor:"threadURL",className:"sr-only",children:"Thread URL"}),e.jsxs("div",{className:"grid grid-cols-1 sm:flex-auto",children:[e.jsx("input",{type:"text",name:"threadURL",id:"threadURL",className:"peer relative bg-gray-800 col-start-1 row-start-1 border-2 border-cyan-500 rounded-md shadow-md  shadow-cyan-500/50 py-1.5 text-gray-100 placeholder:text-gray-100 px-4 focus:ring-0 sm:text-sm sm:leading-6",placeholder:"Introduzca el Handle o el DID de la cuenta",value:p,onChange:s=>j(s.target.value)}),e.jsx("div",{className:"col-start-1 col-end-3 row-start-1 rounded-md shadow-sm ring-1 ring-inset ring-gray-300 peer-focus:ring-2 peer-focus:ring-indigo-600","aria-hidden":"true"})]}),e.jsx("div",{className:"mt-3 sm:ml-4 sm:mt-0 sm:flex-shrink-0 flex",children:e.jsx("button",{onClick:async s=>{s.preventDefault(),h(!0);const t=await _(s);new URLSearchParams,b(t),v(t)},className:"block w-full rounded-md bg-gray-800 px-3 py-2 text-center text-sm font-semibold text-white shadow-sm hover:bg-gray-600 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:f?e.jsxs("svg",{className:"animate-spin h-5 w-5 text-white inline-block",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}):e.jsx("span",{className:"whitespace-nowrap",children:"Solicitar Datos"})})})]}),l&&e.jsxs("div",{id:"inicio",children:[e.jsx("div",{className:"flex gap-2 justify-center",children:e.jsx("div",{className:"mt-6 w-auto flex",children:e.jsxs("div",{className:"bg-gray-900 overflow-hidden shadow border border-blue-100 rounded-lg flex flex-wrap justify-center",children:[e.jsx("div",{className:"py-2 pl-6 pr-4",children:e.jsxs("div",{className:"mt-2 max-w-xl text-sm text-gray-900",children:[e.jsxs("p",{children:[e.jsxs("div",{children:[e.jsx("span",{children:e.jsx("img",{className:"h-14 w-14 rounded-full",src:`https://cdn.bsky.app/img/avatar/plain/${l?.profile.uri.split("/")[2]}/${l?.profile.content.avatar.ref.$link}@jpeg?v=1&size=90x90`,alt:"avatar"})}),e.jsxs("span",{className:"text-2xl font-bold text-gray-300",children:[l?.profile.content.displayName," "]}),e.jsxs("span",{className:"text-sm text-gray-400",children:[" @",c.get(u)]})]}),e.jsxs("p",{className:"font-normal text-orange-500",children:[" ",l?.profile.uri.split("/")[2]]}),e.jsx("br",{})]}),e.jsx("p",{className:"font-normal text-gray-300",children:l?.profile.content.description.split(`
`).map((s,t)=>e.jsxs("span",{children:[s,e.jsx("br",{})]},t))})]})}),e.jsx("div",{className:"py-2 pr-6 pl-4",children:e.jsxs("div",{className:"mt-4 max-w-xl text-sm text-gray-300 text-left grid gap-3 grid-cols-2 p-5 mb-4 border border-white rounded-lg bg-gray-900",children:[e.jsxs("div",{children:[e.jsx("p",{children:e.jsx("a",{href:"#posts",className:"hover:underline font-semibold",children:"Posts"})}),e.jsx("p",{children:e.jsx("a",{href:"#reposts",className:"hover:underline font-semibold",children:"Reposts"})}),e.jsx("p",{children:e.jsx("a",{href:"#likes",className:"hover:underline font-semibold",children:"Likes"})}),e.jsx("p",{children:e.jsx("a",{href:"#follows",className:"hover:underline font-semibold",children:"Siguiendo"})}),e.jsx("p",{children:e.jsx("a",{href:"#inicio",className:"hover:underline font-semibold",children:"Seguidores"})}),e.jsx("p",{children:e.jsx("a",{href:"#blocks",className:"hover:underline font-semibold",children:"Cuentas Bloqueadas"})}),e.jsx("p",{children:e.jsx("a",{href:"#inicio",className:"hover:underline font-semibold",children:"Bloqueado Por"})}),e.jsx("p",{children:e.jsx("a",{href:"#inicio",className:"hover:underline font-semibold",children:"Cambios de Handle"})}),e.jsx("p",{children:e.jsx("a",{href:"#inicio",className:"hover:underline font-semibold",children:"Invitado por"})}),e.jsx("p",{children:e.jsx("a",{href:"#inicio",className:"hover:underline font-semibold",children:"Ha Invitado a"})})]}),e.jsxs("div",{className:"text-right text-yellow-500 font-semibold",children:[e.jsx("p",{children:l?.posts.length.toLocaleString()}),e.jsx("p",{children:l?.reposts.length.toLocaleString()}),e.jsx("p",{children:l?.likes.length.toLocaleString()}),e.jsx("p",{children:l?.follows.length.toLocaleString()}),e.jsx("p",{className:"text-red-600",children:"Solo usuario registrados"}),e.jsx("p",{children:l?.blocks.length.toLocaleString()}),e.jsx("p",{className:"text-red-600",children:"Solo usuario registrados"}),e.jsx("p",{className:"text-red-600",children:"Solo usuario registrados"}),e.jsx("p",{className:"text-red-600",children:"Solo usuario registrados"}),e.jsx("p",{className:"text-red-600",children:"Solo usuario registrados"})]})]})})]})})}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:e.jsxs("div",{className:"mt-6 max-w-xl flex overflow-hidden flex-col ",children:[e.jsxs("div",{className:"p-5 mb-4 border border-blue-100 rounded-lg bg-gray-900",children:[e.jsx("a",{id:"blocks",href:"#inicio",className:"p-3 top-0 text-lg font-semibold text-blue-200 hover:underline",children:e.jsx("div",{className:"mb-4 border border-blue-100 items-center block p-3 sm:flex hover:bg-gray-800 rounded-lg",children:"Bloqueadas "})}),e.jsx("ol",{className:"mt-3 divide-y divider-gray-200 ",children:l?.blocks.toReversed().map((s,t)=>e.jsx("li",{children:e.jsx("a",{href:`https://bsky.app/profile/${s.content.subject}`,target:"_blank",className:"items-center block p-3 sm:flex hover:bg-gray-800 rounded-3xl",children:e.jsxs("div",{className:"text-orange-500",children:[e.jsx("div",{className:"text-base font-normal",children:e.jsxs("span",{className:"text-orange-500",children:["@",c.has(s.content.subject)?c.get(s.content.subject):s.content.subject]})}),e.jsxs("span",{className:"inline-flex items-center text-xs font-normal text-gray-500 ",children:["Bloqueado el ",new Date(s.content.createdAt).toLocaleDateString()]})]})})},t))})]}),e.jsxs("div",{className:"p-5 mb-4 border border-blue-100 rounded-lg bg-gray-900  ",children:[e.jsx("a",{id:"posts",href:"#inicio",className:"p-3 top-0 text-lg font-semibold text-blue-200 hover:underline",children:e.jsx("div",{className:"mb-4 border border-blue-100 items-center block p-3 sm:flex hover:bg-gray-800 rounded-lg",children:"Posts"})}),e.jsx("ol",{className:"mt-3 divide-y divider-gray-200 ",children:l?.posts.toReversed().map((s,t)=>e.jsx("li",{children:e.jsx("a",{href:`https://bsky.app/profile/${u}/post/${s.uri.split("/")[4]}`,target:"_blank",className:"items-center block p-3 sm:flex hover:bg-gray-800 rounded-3xl",children:e.jsxs("div",{className:"text-gray-200",children:[e.jsxs("div",{className:"text-base font-normal",children:[e.jsx("div",{className:"text-base font-normal",children:e.jsx("span",{className:"font-medium text-yellow-500",children:l?.profile.content.displayName})}),e.jsxs("span",{className:"text-sm font-normal text-orange-500",children:["@",c.get(u)]})]}),e.jsx("div",{className:"text-sm font-normal",children:s.content.text}),e.jsx("span",{className:"inline-flex items-center text-xs font-normal text-gray-500 ",children:new Date(s.content.createdAt).toLocaleDateString()})]})})},t))})]}),e.jsxs("div",{className:"p-5 mb-4 border border-blue-100 rounded-lg bg-gray-900  ",children:[e.jsx("a",{id:"follows",href:"#inicio",className:"p-3 top-0 text-lg font-semibold text-blue-200 hover:underline",children:e.jsx("div",{className:"mb-4 border border-blue-100 items-center block p-3 sm:flex hover:bg-gray-800 rounded-lg",children:"Siguiendo"})}),e.jsx("ol",{className:"mt-3 divide-y divider-gray-200 ",children:l?.follows.toReversed().map((s,t)=>e.jsx("li",{children:e.jsx("a",{href:`https://bsky.app/profile/${s.content.subject}`,target:"_blank",className:"items-center block p-3 sm:flex hover:bg-gray-800 rounded-3xl",children:e.jsxs("div",{className:"text-orange-500 ",children:[e.jsx("div",{className:"text-base font-normal",children:e.jsxs("span",{className:"text-orange-500",children:["@",c.has(s.content.subject)?c.get(s.content.subject):s.content.subject]})}),e.jsxs("span",{className:"inline-flex items-center text-xs font-normal text-gray-500 ",children:["Seguido el ",new Date(s.content.createdAt).toLocaleDateString()]})]})})},t))})]}),e.jsxs("div",{className:"p-5 mb-4 border border-blue-100 rounded-lg bg-gray-900  ",children:[e.jsx("a",{id:"reposts",href:"#inicio",className:"p-3 top-0 text-lg font-semibold text-blue-200 hover:underline",children:e.jsx("div",{className:"mb-4 border border-blue-100 items-center block p-3 sm:flex hover:bg-gray-800 rounded-lg",children:"Repost"})}),e.jsx("ol",{className:"mt-3 divide-y divider-gray-200 ",children:l?.reposts.toReversed().map((s,t)=>e.jsx("li",{children:e.jsx("a",{href:`https://bsky.app/profile/${s.content.subject.uri.split("/")[2]}/post/${s.content.subject.uri.split("/")[4]}`,target:"_blank",className:"items-center block p-3 sm:flex hover:bg-gray-800 rounded-3xl ",children:e.jsxs("div",{className:"text-gray-100",children:[e.jsxs("div",{className:"text-base font-normal",children:[e.jsx("span",{className:"font-medium text-yellow-500 ",children:c.get(u)})," ",e.jsx("a",{className:"text-xs",children:"repost al post de"})," ",e.jsx("span",{className:"font-medium text-orange-500 ",children:c.has(s.content.subject.uri.split("/")[2])?c.get(s.content.subject.uri.split("/")[2]):s.content.subject.uri.split("/")[2]})]}),e.jsxs("span",{className:"inline-flex items-center text-xs font-normal text-gray-500 ",children:["Reposteado el ",new Date(s.content.createdAt).toLocaleDateString()]})]})})},t))})]}),e.jsxs("div",{className:"p-5 mb-4 border border-gray-100 rounded-lg bg-white  ",children:[e.jsx("a",{id:"likes",href:"#inicio",className:"text-lg font-semibold text-gray-900 ",children:"Likes"}),e.jsx("ol",{className:"mt-3 divide-y divider-gray-200 ",children:l?.likes.map((s,t)=>e.jsx("li",{children:e.jsx("a",{href:`https://bsky.app/profile/${s.content.subject.uri.split("/")[2]}/post/${s.content.subject.uri.split("/")[4]}`,target:"_blank",className:"items-center block p-3 sm:flex hover:bg-gray-50 ",children:e.jsxs("div",{className:"text-gray-600 ",children:[e.jsxs("div",{className:"text-base font-normal",children:[e.jsx("span",{className:"font-medium text-gray-900 ",children:c.get(u)})," ","liked a post by"," ",e.jsx("span",{className:"font-medium text-gray-900 break-all",children:c.has(s.content.subject.uri.split("/")[2])?c.get(s.content.subject.uri.split("/")[2]):s.content.subject.uri.split("/")[2]})]}),e.jsx("span",{className:"inline-flex items-center text-xs font-normal text-gray-500 ",children:s.content.createdAt})]})})},t))})]})]})})]})]})]})})}),e.jsx("footer",{className:"text-center h-64 w-full",children:e.jsx("div",{className:"mx-auto max-w-7xl px-2",children:e.jsxs("span",{className:"footer-text text-gray-300 text-xs",children:[e.jsxs("a",{href:"https://bsky.app/profile/zalatoy.com",target:"_blank",className:"footer-text text-gray-300 text-xs",children:["By Zalatoy ",new Date().getFullYear()]})," "]})})})]})};export{U as default};
